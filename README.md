# Safety-Pay 🚧💰

**건설 현장 안전감시단을 위한 급여 자동 계산 시스템**

현장 근로자들이 스마트폰으로 급여와 공수를 계산하고, 결근 시 발생하는 **금전적 손실**을 직관적으로 확인할 수 있는 웹 애플리케이션입니다.

## 🎯 주요 기능

### 1. 회원가입 & 로그인
- **회원가입**: 아이디, 비밀번호(토큰), 이름, 휴대폰번호, 입사년월, 현장 정보
- **GPS 현장 자동 감지**: 위치 기반으로 가장 가까운 현장 자동 선택
- **로그인**: 세션 기반 인증 시스템
- **사용자 프로필**: 이름, 현장, 입사일자 정보 표시

### 2. 자동 날짜 계산
- **산정 기간**: 전월 25일 ~ 당월 26일
- **지급일**: 익월 10일 (예: 12월 귀속 → 1월 10일 지급)
- **직관적인 달력 선택기**: 월/년도 빠른 선택 가능

### 3. 급여 계산 로직
- **기본급**: 3,000,000원 (26공수 만근 기준)
- **결근 차감**: 1공수 부족 시 100,000원 차감
- **초과 근무**: 26공수 초과 시 추가 급여 지급
- **공제 선택**: 사업소득세(3.3%) 또는 4대보험(9.4%)

### 4. 손실금액 강조 UI
- 💸 결근 시 **빨간색으로 손실액 강조 표시**
- 🎉 만근 달성 시 축하 배지 + 월차 발생
- 실시간 급여 계산 결과

### 5. 월차 관리 시스템
- **월차 누적**: 만근 달성 시 자동으로 월차 1일 발생
- **월차 사용**: 달력으로 사용일 지정
- **사용 내역**: 전체 사용 이력 확인 및 삭제 가능
- **남은 월차**: 실시간 표시

### 6. 입사일자 & 근속 기간
- 입사년월 입력
- **자동 계산**: X년 + Y개월 형식으로 표시
- 총 근무 개월수 표시

## 🛠 기술 스택

- **Framework**: React 18 + Vite
- **Styling**: Tailwind CSS (Dark Mode + Safety Orange Theme)
- **Libraries**: 
  - `date-fns` - 날짜 계산
  - `lucide-react` - 아이콘
- **GPS**: Geolocation API
- **Storage**: LocalStorage (사용자 관리) + SessionStorage (인증)
- **Deployment**: Vercel

## 📦 설치 및 실행

### 로컬 개발

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm run dev
```

개발 서버가 `http://localhost:5173`에서 실행됩니다.

### 프로덕션 빌드

```bash
# 빌드
npm run build

# 빌드 결과 미리보기
npm run preview
```

## 🚀 Vercel 배포

### 방법 1: Vercel CLI
```bash
# Vercel CLI 설치 (최초 1회)
npm i -g vercel

# 배포
vercel
```

### 방법 2: GitHub 연동
1. GitHub 리포지토리에 푸시
2. [Vercel](https://vercel.com)에서 프로젝트 임포트
3. 자동 배포 완료

## 📱 사용 방법

### 1단계: 회원가입
1. "회원가입" 버튼 클릭
2. 아이디, 비밀번호, 이름, 휴대폰번호 입력
3. 입사년월 선택
4. **"GPS 자동탐지"** 버튼으로 현장 자동 선택 또는 수동 선택
5. 회원가입 완료

### 2단계: 로그인
1. 아이디와 비밀번호 입력
2. 로그인 → 메인 화면 진입

### 3단계: 급여 계산
1. **귀속월 선택**: 급여를 계산할 월 선택 (달력 클릭 시 빠른 선택)
2. **공수 입력**: 해당 월의 실제 근무 일수 입력
3. **입사일자**: 입사년월 입력 시 자동으로 근속 기간 계산
4. **공제 선택**: 사업소득세(3.3%) 또는 4대보험(9.4%) 선택
5. **결과 확인**: 
   - 세전 급여
   - 손실금액 (있을 경우 빨간색 강조)
   - 공제액
   - **최종 실수령액**
   - 만근 시 월차 발생 알림

### 4단계: 월차 관리
1. **월차 확인**: 헤더의 녹색 배지 클릭
2. **월차 사용**: "+ 월차사용" 버튼 클릭 → 날짜 선택
3. **사용 내역**: 전체 이력 확인 및 삭제

## 💡 계산 공식

```javascript
// 급여 계산
부족 공수 = 26 - 내 공수
손실금액 = 부족 공수 × 100,000원 (부족할 경우에만)
세전 급여 = 3,000,000 - 손실금액 + 추가수당
공제액 = 세전 급여 × 공제율
실수령액 = 세전 급여 - 공제액

// 근속 기간 계산
년차 = 오늘 - 입사일 (년)
개월수 = (오늘 - 입사일) % 12 (개월)
총 개월수 = 오늘 - 입사일 (개월)
```

## 🎨 UI/UX 특징

- 🌙 **다크 모드**: 현장 친화적 어두운 테마 (#121212)
- 🧡 **Safety Orange**: 안전 강조 색상 (#FF9800)
- 📱 **모바일 최적화**: 스마트폰 사용에 최적화된 UI
- ⚠️ **손실 강조**: 빨간색으로 결근 손실액 강조
- 🎉 **만근 배지**: 축하 애니메이션
- 📍 **GPS 연동**: 현장 자동 감지
- ✨ **애니메이션**: 부드러운 전환 효과

## 📁 프로젝트 구조

```
safety-pay/
├── src/
│   ├── components/
│   │   ├── Login.jsx              # 로그인 화면
│   │   ├── SignUp.jsx             # 회원가입 화면 (GPS 포함)
│   │   └── SalaryCalculator.jsx   # 급여 계산기 메인
│   ├── App.jsx                    # 앱 라우팅 & 인증 관리
│   ├── main.jsx                   # React 엔트리포인트
│   └── index.css                  # Tailwind + 글로벌 스타일
├── index.html                     # HTML 템플릿
├── package.json                   # 의존성 관리
├── vite.config.js                 # Vite 설정
├── tailwind.config.js             # Tailwind 커스텀 테마
├── postcss.config.js              # PostCSS 설정
└── vercel.json                    # Vercel 배포 설정
```

## 🏗️ 지원 현장 목록

현재 GPS로 자동 감지 가능한 주요 현장:

1. **삼성바이오 송도공장** (인천광역시 연수구)
2. **롯데케미칼 여수공장** (전라남도 여수시)
3. **현대제철 당진공장** (충청남도 당진시)
4. **포스코 포항제철소** (경상북도 포항시)
5. **SK하이닉스 이천캠퍼스** (경기도 이천시)
6. **삼성전자 평택캠퍼스** (경기도 평택시)

> 더 많은 현장 추가 가능 (`SignUp.jsx`의 `WORK_SITES` 배열 수정)

## ⚙️ 설정 및 커스터마이징

### 현장 추가
`src/components/SignUp.jsx` 파일의 `WORK_SITES` 배열에 새 현장 추가:

```jsx
const WORK_SITES = [
    { 
        name: '새 현장 이름', 
        lat: 위도, 
        lng: 경도, 
        address: '주소' 
    },
    // ... 기존 현장들
];
```

### 급여 기준 변경
`src/components/SalaryCalculator.jsx` 파일의 상수 수정:

```jsx
const BASE_SALARY = 3000000;      // 기본급
const BASE_WORK_DAYS = 26;        // 기준 만근 공수
const PER_DAY_AMOUNT = 100000;    // 1공수당 금액
```

## 📊 데이터 저장 구조

### LocalStorage
- `safety-pay-users`: 전체 사용자 정보 (회원가입 데이터)
- `safety-pay-vacation-days`: 누적 월차 일수
- `safety-pay-perfect-months`: 만근 달성 월 목록
- `safety-pay-used-vacations`: 월차 사용 내역
- `safety-pay-hire-date`: 입사일자

### SessionStorage
- `authenticated`: 로그인 상태
- `current-user`: 현재 로그인 사용자 정보

## 📝 주의사항

- 실제 급여는 현장 상황, 계약 조건에 따라 다를 수 있습니다
- 이 앱은 **급여 예상 계산용**이며, 최종 급여는 회사 공식 정산을 따릅니다
- GPS 기능은 HTTPS 환경에서만 작동합니다 (로컬 개발 시 localhost는 허용)
- 사용자 데이터는 브라우저에만 저장되므로 브라우저 삭제 시 데이터 손실 가능

## 🔐 보안

- 비밀번호는 현재 평문 저장 (프로토타입용)
  - 프로덕션 환경에서는 bcrypt 등으로 암호화 필요
- 사용자 데이터는 LocalStorage에 저장
  - 프로덕션 환경에서는 백엔드 서버 + DB 권장
- GPS 위치 정보는 저장하지 않음 (현장 선택 시에만 사용)

## 🚦 다음 단계 (프로덕션 배포 시)

1. **백엔드 API 구축**
   - Node.js/Express 또는 FastAPI
   - PostgreSQL/MongoDB 데이터베이스
   - JWT 인증

2. **비밀번호 암호화**
   - bcrypt 해싱 적용

3. **환경 변수 관리**
   - `.env` 파일로 설정 관리

4. **에러 핸들링**
   - Sentry 등 에러 모니터링

5. **성능 최적화**
   - Code splitting
   - Lazy loading

## 📄 라이선스

MIT License

---

**개발자**: Safety-Pay Team  
**문의**: 현장 안전관리팀  
**버전**: 2.0.0 (GPS & 회원가입 시스템 통합)
